### Get OpenID configuration from Keycloak
GET {{authorization_host}}/realms/{{realm}}/.well-known/openid-configuration

### Authenticate to Keycloak and get a token
# @name Authenticate
POST {{authorization_host}}/realms/{{realm}}/protocol/openid-connect/token
Content-Type: application/x-www-form-urlencoded

grant_type=password&client_id={{client_id}}&client_secret={{client_secret}}&username={{username}}&password={{password}}&scope=openid

### [TEST ONLY] Authenticate to Keycloak using UMA ticket grant (for advanced authorization testing)
# This call is for testing purposes only. It requests a token from Keycloak using the UMA ticket grant type,
# which is used for fine-grained authorization scenarios (RBAC).
# Spring Cloud Gateway is configured to do this automatically. Only used this if you need to call services directly.
# @name Authenticate
POST {{authorization_host}}/realms/{{realm}}/protocol/openid-connect/token
Content-Type: application/x-www-form-urlencoded
Authorization: Bearer {{Authenticate.response.body.access_token}}

grant_type=urn:ietf:params:oauth:grant-type:uma-ticket&client_id={{client_id}}&client_secret={{client_secret}}&audience={{client_id}}&scope=openid

// ==================== CASES ====================

### Get list of all cases
# @name GetCases
GET {{api_gateway_host}}/api/cases
Authorization: Bearer {{Authenticate.response.body.access_token}}

### Search cases (full-text)
# @name SearchCases
GET {{api_gateway_host}}/api/cases/search?query=Creedmoor
Authorization: Bearer {{Authenticate.response.body.access_token}}

### Create a new case
# @name CreateCase
POST {{api_gateway_host}}/api/cases
Content-Type: application/json
Authorization: Bearer {{Authenticate.response.body.access_token}}

{
  "manufacturer": "Lapua",
  "caliber": "6.5 Creedmoor",
  "primerSize": "SMALL_RIFLE",
  "cost": {
    "amount": 89.99,
    "currency": "CAD"
  },
  "quantityPerBox": {
    "value": 100,
    "unit": "1",
    "scale": "ABSOLUTE"
  }
}

### Get the created case by ID
# @name GetCaseById
GET {{api_gateway_host}}/api/cases/{{CreateCase.response.body.id}}
Authorization: Bearer {{Authenticate.response.body.access_token}}

### Update the created case
# @name UpdateCase
PUT {{api_gateway_host}}/api/cases/{{CreateCase.response.body.id}}
Content-Type: application/json
Authorization: Bearer {{Authenticate.response.body.access_token}}

{
  "manufacturer": "Hornady",
  "caliber": "308 Winchester",
  "primerSize": "LARGE_RIFLE",
  "cost": {
    "amount": 69.99,
    "currency": "CAD"
  },
  "quantityPerBox": {
    "value": 50,
    "unit": "1",
    "scale": "ABSOLUTE"
  }
}

### Delete the created case
# @name DeleteCase
DELETE {{api_gateway_host}}/api/cases/{{CreateCase.response.body.id}}
Authorization: Bearer {{Authenticate.response.body.access_token}}

// ==================== PROPELLANTS ====================

### Get list of all propellants
# @name GetPropellants
GET {{api_gateway_host}}/api/propellants
Authorization: Bearer {{Authenticate.response.body.access_token}}

### Search propellants (full-text)
# @name SearchPropellants
GET {{api_gateway_host}}/api/propellants/search?query=H4350
Authorization: Bearer {{Authenticate.response.body.access_token}}

### Create a new propellant (Imperial units - pounds)
# @name CreatePropellant
POST {{api_gateway_host}}/api/propellants
Content-Type: application/json
Authorization: Bearer {{Authenticate.response.body.access_token}}

{
  "manufacturer": "Hodgdon",
  "type": "H4350",
  "cost": {
    "amount": 45.99,
    "currency": "CAD"
  },
  "weightPerContainer": {
    "value": 1.0,
    "unit": "[lb_av]",
    "scale": "ABSOLUTE"
  }
}

### Get the created propellant by ID
# @name GetPropellantById
GET {{api_gateway_host}}/api/propellants/{{CreatePropellant.response.body.id}}
Authorization: Bearer {{Authenticate.response.body.access_token}}

### Update the created propellant (Metric units - kilograms)
# @name UpdatePropellant
PUT {{api_gateway_host}}/api/propellants/{{CreatePropellant.response.body.id}}
Content-Type: application/json
Authorization: Bearer {{Authenticate.response.body.access_token}}

{
  "manufacturer": "IMR",
  "type": "4895",
  "cost": {
    "amount": 49.99,
    "currency": "CAD"
  },
  "weightPerContainer": {
    "value": 0.5,
    "unit": "kg",
    "scale": "ABSOLUTE"
  }
}

### Delete the created propellant
# @name DeletePropellant
DELETE {{api_gateway_host}}/api/propellants/{{CreatePropellant.response.body.id}}
Authorization: Bearer {{Authenticate.response.body.access_token}}

// ==================== PRIMERS ====================

### Get list of all primers
# @name GetPrimers
GET {{api_gateway_host}}/api/primers
Authorization: Bearer {{Authenticate.response.body.access_token}}

### Search primers (full-text)
# @name SearchPrimers
GET {{api_gateway_host}}/api/primers/search?query=CCI
Authorization: Bearer {{Authenticate.response.body.access_token}}

### Create a new primer
# @name CreatePrimer
POST {{api_gateway_host}}/api/primers
Content-Type: application/json
Authorization: Bearer {{Authenticate.response.body.access_token}}

{
  "manufacturer": "CCI",
  "type": "BR-4",
  "primerSize": "SMALL_RIFLE",
  "cost": {
    "amount": 89.99,
    "currency": "CAD"
  },
  "quantityPerBox": {
    "value": 1000,
    "unit": "1",
    "scale": "ABSOLUTE"
  }
}

### Get the created primer by ID
# @name GetPrimerById
GET {{api_gateway_host}}/api/primers/{{CreatePrimer.response.body.id}}
Authorization: Bearer {{Authenticate.response.body.access_token}}

### Update the created primer
# @name UpdatePrimer
PUT {{api_gateway_host}}/api/primers/{{CreatePrimer.response.body.id}}
Content-Type: application/json
Authorization: Bearer {{Authenticate.response.body.access_token}}

{
  "manufacturer": "Federal",
  "type": "205M",
  "primerSize": "SMALL_RIFLE",
  "cost": {
    "amount": 99.99,
    "currency": "CAD"
  },
  "quantityPerBox": {
    "value": 1000,
    "unit": "1",
    "scale": "ABSOLUTE"
  }
}

### Delete the created primer
# @name DeletePrimer
DELETE {{api_gateway_host}}/api/primers/{{CreatePrimer.response.body.id}}
Authorization: Bearer {{Authenticate.response.body.access_token}}

// ==================== PROJECTILES ====================

### Get list of all projectiles
# @name GetProjectiles
GET {{api_gateway_host}}/api/projectiles
Authorization: Bearer {{Authenticate.response.body.access_token}}

### Search projectiles (full-text)
# @name SearchProjectiles
GET {{api_gateway_host}}/api/projectiles/search?query=ELD
Authorization: Bearer {{Authenticate.response.body.access_token}}

### Create a new projectile (Imperial units - grains)
# @name CreateProjectile
POST {{api_gateway_host}}/api/projectiles
Content-Type: application/json
Authorization: Bearer {{Authenticate.response.body.access_token}}

{
  "manufacturer": "Hornady",
  "weight": {
    "value": 140.0,
    "unit": "[gr]",
    "scale": "ABSOLUTE"
  },
  "type": "ELD-Match",
  "cost": {
    "amount": 45.99,
    "currency": "CAD"
  },
  "quantityPerBox": 100
}

### Get the created projectile by ID
# @name GetProjectileById
GET {{api_gateway_host}}/api/projectiles/{{CreateProjectile.response.body.id}}
Authorization: Bearer {{Authenticate.response.body.access_token}}

### Update the created projectile (Metric units - grams)
# @name UpdateProjectile
PUT {{api_gateway_host}}/api/projectiles/{{CreateProjectile.response.body.id}}
Content-Type: application/json
Authorization: Bearer {{Authenticate.response.body.access_token}}

{
  "manufacturer": "Sierra",
  "weight": {
    "value": 9.72,
    "unit": "g",
    "scale": "ABSOLUTE"
  },
  "type": "MatchKing",
  "cost": {
    "amount": 49.99,
    "currency": "CAD"
  },
  "quantityPerBox": 50
}

### Delete the created projectile
# @name DeleteProjectile
DELETE {{api_gateway_host}}/api/projectiles/{{CreateProjectile.response.body.id}}
Authorization: Bearer {{Authenticate.response.body.access_token}}
